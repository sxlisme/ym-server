webpackJsonp([2],{"83uZ":function(t,s){},gpVb:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("IHPB"),i=e.n(a),o=e("4YfN"),n=e.n(o),r=e("SJI6"),c=e("fqE/"),m=e("P9l9"),l=e("ccBP"),d=e("Tg7E"),u={data:function(){return{tittle:"首页",num:0,id:666,list:[1,2,3,4],page:1,total:1,allLoaded:!0,moreBtnName:"加载更多",taskList:[]}},methods:n()({refreshData:function(){this.page=1,this.total=1,this.allLoaded=!0,this.moreBtnName="加载更多",this.taskList=[],this.getTaskList()}},Object(r.mapMutations)({setNum:"SET_NUM"}),{todetail:function(){this.$router.togo("/Home/Detail/"+new Date)},loadTop:function(){this.$refs.loadmore.onTopLoaded(),console.log("刷新")},loadBottom:function(){this.$refs.loadmore.onBottomLoaded(),this.page+=1,console.log("加载数据:"+this.page)},showGift:function(t){this.$toast(t)},oneKeyRun:function(t){var s=this,e={cookies:t.cookies,username:t.username,type:t.type,times:t.group_num,uid:t.uid};Object(m.a)(e).then(function(t){d.Indicator.close(),t&&200===t.data.code?(s.$toast("已重跑~"),s.refreshData()):s.$toast("操作失败!")}).catch(function(t){d.Indicator.close(),console.log(t),s.$toast("操作失败!")})},getTaskList:function(){var t=this,s={page:this.page,name:sessionStorage.getItem("username")};d.Indicator.open({text:"加载中...",spinnerType:"fading-circle"}),Object(m.f)(s).then(function(s){var e;(d.Indicator.close(),s&&s.data&&200===s.data.code)?(t.total=s.data.total,(e=t.taskList).push.apply(e,i()(s.data.data))):t.$toast("获取信息失败")}).catch(function(s){d.Indicator.close(),t.$toast("获取信息失败")})},getMore:function(){this.page++;var t=this.total/10+1;this.page>t&&(this.allLoaded=!1),this.allLoaded?this.getTaskList():(this.$toast("已加载所有，再点也没有"),this.moreBtnName="加载完毕")},toLogs:function(t){t?this.$router.togo("/Home/Detail/"+t):this.$toast("无法查看，因为没有获取到任务ID")}}),mounted:function(){this.getTaskList()},components:{commonHeader:c.a},computed:n()({},Object(r.mapGetters)(["number"]),Object(r.mapState)({number:function(t){return t.home.number}})),filters:{f_type:function(t){return t?"mb"===t?"幸运彩球":"mx"===t?"金猪送福":void 0:"--"},f_cook:function(t){return t?t.substring(t.length-15,t.length):"--"},f_harvest:function(t){return t?t<0?'<mt-badge  size="small" type="warning">'+t+"</mt-badge>":'<mt-badge  size="small" type="success">'+t+"</mt-badge>":0},i_time:function(t){return Object(l.dateFtt)("yyyy-MM-dd hh:mm:ss",t)},f_time:function(t){return Object(l.dateFtt)("hh:mm:ss",t)}}},v={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content-box"},[e("common-header",{attrs:{tittle:t.tittle,showback:!1,addTask:!0}}),t._v(" "),e("div",{staticClass:"page-content"},[t._l(t.taskList,function(s,a){return e("div",{key:a,staticClass:"taskListCard"},[e("div",{staticClass:"taskCol"},[e("div",{staticClass:"taskItem"},[t._v("# "),e("b",[t._v(t._s(s.id))])]),t._v(" "),e("div",{staticClass:"taskItem"},[t._v("cookie:"+t._s(t._f("f_cook")(s.cookies)))]),t._v(" "),e("div",{staticClass:"taskItem"},[t._v(t._s(t._f("f_type")(s.type))+"*"+t._s(s.group_num))])]),t._v(" "),e("div",{staticClass:"taskCol"},[e("div",{staticClass:"taskItem"},[t._v(t._s(t._f("i_time")(s.insert_time)))]),t._v(" "),e("div",{staticClass:"taskItem"},[t._v("-")]),t._v(" "),e("div",{staticClass:"taskItem"},[t._v(t._s(t._f("f_time")(s.finish_time)))]),t._v(" "),e("div",{staticClass:"taskItem"},[0===s.status?e("mt-badge",{attrs:{size:"small",type:"primary"}},[t._v("等待")]):-1===s.status?e("mt-badge",{attrs:{size:"small",type:"error"}},[t._v("失效")]):1===s.status?e("mt-badge",{attrs:{size:"small",type:"primary"}},[t._v("抽奖中..")]):2===s.status?e("mt-badge",{attrs:{size:"small",type:"success"}},[t._v("完毕")]):t._e()],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:-1!==s.status,expression:"v.status!==-1"}],staticClass:"taskCol"},[e("div",{staticClass:"taskItem"},[t._v("积分:\n          "),1*s.harvest>0?e("mt-badge",{attrs:{size:"small",type:"success"}},[t._v(t._s(s.harvest))]):e("mt-badge",{attrs:{size:"small",type:"error"}},[t._v(t._s(s.harvest))])],1),t._v(" "),e("div",{staticClass:"taskItem"},[e("mt-badge",{directives:[{name:"show",rawName:"v-show",value:""!==s.has_goods,expression:"v.has_goods!==''"}],attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.showGift(s.has_goods)}}},[t._v("奖品")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:""==s.has_goods&&2===s.status,expression:"v.has_goods==''&&v.status===2"}]},[t._v("未中奖")])],1),t._v(" "),e("div",{staticClass:"taskItem"},[e("mt-badge",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.toLogs(s.id)}}},[t._v("日志")])],1),t._v(" "),e("div",{staticClass:"taskItem"},[e("mt-badge",{directives:[{name:"show",rawName:"v-show",value:-1!==s.status,expression:"v.status!==-1"}],attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.oneKeyRun(s)}}},[t._v("一键重跑")])],1)])])}),t._v(" "),e("div",{staticClass:"taskListCard"},[e("mt-button",{staticClass:"more",attrs:{icon:"more"},on:{click:t.getMore}},[t._v(t._s(t.moreBtnName))])],1)],2)],1)},staticRenderFns:[]};var _=e("C7Lr")(u,v,!1,function(t){e("83uZ")},"data-v-8eb00a68",null);s.default=_.exports}});